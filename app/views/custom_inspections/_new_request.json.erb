{
 success: true,
 items: [
 {
  xtype: 'form'
  , flex: 1
  , autoScroll: true
  , title: 'Nuova richiesta', closable: true
  ,	layout: {
	    type: 'vbox',
	    align : 'begin',
	    pack  : 'start'
	}
		
  //, defaults: {padding: '0px 0px 0px 0px'}	
  , margin: '10px 10px' 	
	
  , items: [{html: '&nbsp'}]
  
  , dockedItems: [
   { 
    xtype: 'toolbar', dock: 'top',
    padding: '10px 20px 10px 20px',
    style:'background-color: #888;',
    items: [  
      {text: 'Inserisci nuova richiesta per CONTAINER'
        , style: 'padding: 7px'
        , iconCls: 'fa fa-plus fa-2x', scale: 'medium'
        , handler: function(){this.up('form').addContainerRow.call(this, this.up('form'))}},	  
      {text: 'Inserisci nuova richiesta per LOTTO'
        , style: 'padding: 7px'      
        , iconCls: 'fa fa-plus fa-2x', scale: 'medium'
        , handler: function(){this.up('form').addLottoRow.call(this, this.up('form'))}},
    ]
   }
   , { 
    xtype: 'toolbar', dock: 'bottom',   
    items: [  
        {xtype: 'tbfill'}
      , {text: 'Invia richiesta', scale: 'large', iconCls: 'fa fa-plus fa-2x', cls: 'btn-add'}
      , {xtype: 'tbfill'}
    ]
   }
  ]  
  
  
  , addContainerRow: function(form){    
	 var m = form.rowContainer;    
     form.add(m);
     form.doLayout();
  }
  
  , addLottoRow: function(form){    
	 var m = form.rowLotto;    
     form.add(m);
     form.doLayout();
  }
  




  , rowContainer:  {xtype: 'container'
	  ,	layout: {
		    type: 'vbox',
		    align : 'stretch',
		    pack  : 'start'
		} 
	  , style: {
				    borderTop: '1px solid grey',
				    borderBottom: '1px solid grey',
				    borderCollapse: true,
				    padding: '15px'
				}						
	  ,  items: [
			{
			    xtype: 'fieldcontainer'
			  , flex: 1
			  ,	layout: {type: 'hbox', align : 'stretch', pack  : 'start'}
			  , defaults: {labelAlign: 'right'}
	  		  , style: {padding: '15px'}			  	
	    	  , items: [
				   {xtype: 'textfield', fieldLabel: 'Container', width: 200, name: 'container_number'}
			     , <%= raw extjs_std_combo('shipowner_id', HandlingHeader.new,
							:fieldLabel => 'Compagnia',
							:input_name => 'shipowner_id',
							:valueField => 'id',
							:displayField => 'name',
							:store => extjs_std_store_data(Shipowner.all),
							:listeners => "change: function(combo, record, index) {								  
											  var me = this, //combo 
											      s_selected = combo.lastSelection[0];
											  this.up('fieldcontainer').down('checkbox').setValue(s_selected.get('manage_full'));
										    }"
						)				
							 -%>     
			     , <%= raw extjs_std_combo_model('activity_op', Activity.new, {}, {flex: 1, fieldLabel: 'Operazione'}) -%>
			     , {xtype: 'numberfield', fieldLabel: 'Quantit&agrave;', width: 220, name: 'qty', hideTrigger: true, disabled: true}			     							 
			     , <%= raw extjs_std_booleanfield('activity_op', Activity.new, {}, {readOnly: false, fieldLabel: 'Messa a disposizione<br><i>(in base a compagnia)</i>', width: 300, labelWidth: 260, disabled: false}) -%>          
			     , {html: '', width: 50}
			 ]
			}     

		  , {
			    xtype: 'fieldcontainer'
			  ,	layout: {type: 'hbox', align : 'stretch', pack  : 'start'}
			  , defaults: {labelAlign: 'right'}
	  		 	 , style: {padding: '0px 15px 0px 15px'}			  	
	    	  , items: [	          
	               {xtype: 'textarea',   fieldLabel: 'Note', name: 'notes', colspan: 5, flex: 1}
			     , {html: '', width: 50}	               
	          ]
	        }               
	  ]}  


  , rowLotto:  {xtype: 'container' 
	  ,	layout: {
		    type: 'vbox',
		    align : 'stretch',
		    pack  : 'start'
		} 
	  , style: {	  
				    borderTop: '1px solid grey',
				    borderBottom: '1px solid grey',
				    borderCollapse: true,
				    padding: '15px'
				}						
	  ,  items: [
			{
			    xtype: 'fieldcontainer'
			  ,	layout: {type: 'hbox', align : 'stretch', pack  : 'start'}
			  , defaults: {labelAlign: 'right'}
	  		  , style: {padding: '15px'}			  	
	    	  , items: [
			       {xtype: 'textfield',   fieldLabel: 'Booking', width: 200, name: 'bookin_number'}
			     , <%= raw extjs_std_combo('shipowner_id', HandlingHeader.new,
							:fieldLabel => 'Compagnia',
							:input_name => 'shipowner_id',
							:valueField => 'id',
							:displayField => 'name',
							:store => extjs_std_store_data(Shipowner.all),
							:listeners => "change: function(combo, record, index) {								  
											  var me = this, //combo 
											      s_selected = combo.lastSelection[0];
											  this.up('fieldcontainer').down('checkbox').setValue(s_selected.get('manage_full'));
										    }"
						)				
							 -%>               
			     , <%= raw extjs_std_combo_model('activity_op', Activity.new, {}, {flex: 1, fieldLabel: 'Operazione'}) -%>
			     , {xtype: 'numberfield', fieldLabel: 'Quantit&agrave;', width: 220, name: 'qty', hideTrigger: true}			     
			     , <%= raw extjs_std_booleanfield('activity_op', Activity.new, {}, {readOnly: false, fieldLabel: 'Messa a disposizione<br><i>(in base a compagnia)</i>', width: 300, labelWidth: 260, disabled: true}) -%>			     
			     , {html: '', width: 50}
			 ]
			}     

		  , {
			    xtype: 'fieldcontainer'
			  ,	layout: {type: 'hbox', align : 'stretch', pack  : 'start'}
			  , defaults: {labelAlign: 'right'}
	  		 	 , style: {padding: '0px 15px 0px 15px'}			  	
	    	  , items: [	          
	               {xtype: 'textarea',   fieldLabel: 'Note', name: 'notes', colspan: 5, flex: 1}
			     , {html: '', width: 50}	               
	          ]
	        }               
	  ]}    

  
 }
 ]
}