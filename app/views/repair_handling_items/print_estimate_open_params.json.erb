{
 "success": true,
 "items": [
  {
   xtype: 'form',
   title: '', closable: false,
   flex: 1,
	layout: {
	    type: 'vbox',
	    align : 'stretch',
	    pack  : 'start',
	}, 
     defaults: {
     	 xtype: 'textfield',
     	 margin: '10 10 0 10',
     },	
     
    items: [       
     	{xtype: 'hidden', name: 'authenticity_token', value: '<%= form_authenticity_token %>'},
     	{xtype: 'hidden', name: 'rhi_id', value: '<%= @item.id %>'},
     	
     	{xtype: 'checkbox', value: false, name: 'hide_prices', fieldLabel: 'Nascondi prezzi', inputValue: true, uncheckedValue: false},
     	
<% if User.current.admin_can?(:repair, :table) %>
		{xtype: 'checkbox', value: false, name: 'show_customer_prices', fieldLabel: 'Mostra importi a compagnia', inputValue: true, uncheckedValue: false},
     	{xtype: 'checkbox', value: true, name: 'show_provider_prices', fieldLabel: 'Mostra importi da fornitore', inputValue: true, uncheckedValue: false},
<% else %>
		{xtype: 'checkbox', value: true, name: 'show_provider_prices', fieldLabel: 'Mostra importi da fornitore', inputValue: true, uncheckedValue: false},     	
<% end %>     	
     	{xtype: 'checkbox', value: false, name: 'show_deleted_row', fieldLabel: 'Mostra righe annullate', inputValue: true, uncheckedValue: false}
	],
    
   buttons: [
    {
        text: '<i class="fa fa-navicon fa"></i> Stampa',
        handler: function(){
        	fp = this.up('form');
            if(fp.getForm().isValid()){
                fp.getForm().submit({
                    method: 'POST',
                    url: '<%= url_for(:controller=>'repair_handling_items', :action=>'print_estimate') -%>',             
                    params: {formValues: Ext.encode(fp.getValues())},
                    method: 'POST',
                    standardSubmit: true,
                    target: '_blank'
                });
            }
        }
    }    
   ] 
    
  }
 ]
}