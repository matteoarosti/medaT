{
 success: true,

   items: [
   	{
   		xtype: 'form',
	    title: '',
	    frame: true,
	    bodyPadding: 10,
	    defaultType: 'textfield',
	    	layout: {
			    type: 'vbox',
			    align : 'stretch',
			    pack  : 'start',
			},
	    items: [
			      <%= raw extjs_std_hiddenfield('id', @item) -%>,
			      <% if @item.qty.to_f > 0 %>
			       , <%= raw extjs_std_numberfield('qty', @item) -%>
			      <% end %>
			      <% if @item.qty_ric.to_f > 0 %>
			       , <%= raw extjs_std_numberfield('qty_ric', @item) -%>
			      <% end %>
			      , <%= raw extjs_std_numberfield('qty_tare', @item) -%>
			      , <%= raw extjs_std_numberfield('qty_gross', @item) -%>
			      , <%= raw extjs_std_textfield('plate', @item) -%>
	    ],
	    
	
		dockedItems: [{
		    xtype: 'toolbar',
		    dock: 'right',
		    width: 135,
			defaults: {
		        xtype: 'button', scale: 'medium', textAlign: 'left'
	        },			    
		    margin: '5 5 5 5',
	    
	     	items:
		        [
		         {
		            text: 'Salva',
		            scale: 'large', cls: 'btn-confirm',
		            handler: function (btn, evt) {
		                           
		             form = this.up('form').getForm();
		             tmp_win  = this.up('window');
		             if (form.isValid()) {
		                btn.disable();
		                
		                
						Ext.Ajax.request({
		                    url: '<%= url_for(:action=>'exe_edit_item_weight_details') -%>',
		                    waitMsg: 'Salvataggio in corso....',
							method:'POST',                     
		                    jsonData: {data: form.getValues()},	
		             	
							success: function(op, opts) {					
								tmp_win.close();
							}, scope: this,
							
							failure: function(rec, op) {
								var result = Ext.JSON.decode(op.getResponse().responseText);
								Ext.MessageBox.show({
			                        title: 'EXCEPTION',
			                        msg: result.message,
			                        icon: Ext.MessageBox.ERROR,
			                        buttons: Ext.Msg.OK
		                    	})					
							}, scope: this,																	 
				    	});	             
		                
	                    return false;
		             }
		            }
		          }
		          
		          
                                         , {
                                         	text: 'Elimina',
                                            scale: 'large', cls: 'btn-del',                                                                                                        
                                            handler: function (btn, evt) {
		                           
									             form = this.up('form').getForm();
									             tmp_win  = this.up('window');                                                                                        							     	 	

												Ext.MessageBox.confirm('Richieta conferma', 'Eliminare?', function(btn){
												
													if(btn === 'yes'){
													
														Ext.Ajax.request({
										                    url: <%= raw url_for(:controller=>'ship_prepares', :action=>'exe_delete_item_weight_details').to_json -%>,
										                    waitMsg: 'Eliminazione in corso....',
															method:'POST',                     
										                    jsonData: {data: form.getValues()},	
										             	
															success: function(op, opts) {					
																tmp_win.close();
															}, scope: this,
															
															failure: function(rec, op) {
																var result = Ext.JSON.decode(op.getResponse().responseText);
																Ext.MessageBox.show({
											                        title: 'EXCEPTION',
											                        msg: result.message,
											                        icon: Ext.MessageBox.ERROR,
											                        buttons: Ext.Msg.OK
										                    	})					
															}, scope: this,						
																			 
												    	});													
													
													} //yes
													
												}); //confirm
										                                                    
                                            }
                                          }		          
		          
		          
		        , {
		            text: 'Chiudi',												            
		            scale: 'large',
		            handler: function (btn, evt) {
		            	tmp_win  = this.up('window');
		            	tmp_win.close();
		            }
		          }
		          
		         ]
			}] 
	    
	    
	
   	}
   ]
}