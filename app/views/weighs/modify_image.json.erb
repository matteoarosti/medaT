{
 success: true,

   items: [
   	{
   		xtype: 'form',
	    title: '',
	    frame: true,
	    bodyPadding: 10,
	    defaultType: 'textfield',
	    	layout: {
			    type: 'vbox',
			    align : 'stretch',
			    pack  : 'start',
			},
	    items: [
	      <%= raw extjs_std_hiddenfield('id', @item) -%>,	      
			{
	            xtype: 'filefield',
	            allowBlank: false,
	            emptyText: 'Seleziona file scansione cedolino',
	            fieldLabel: 'File',
	            name: 'file',
	            buttonText: '',
	            buttonConfig: {
	                iconCls: 'upload-icon'
	            }
	        }
	        
	        , {xtype: 'hiddenfield', name: 'authenticity_token', value: '<%= form_authenticity_token %>'}	      
	      										    										    										    
	    ],
	    
	
		dockedItems: [{
		    xtype: 'toolbar',
		    dock: 'right',
		    width: 135,
			defaults: {
		        xtype: 'button', scale: 'medium', textAlign: 'left'
	        },			    
		    margin: '5 5 5 5',
	    
	     	items:
		        [
		         {
		            text: 'Salva',
		            scale: 'large', cls: 'btn-confirm',
		            handler: function (btn, evt) {
		                           
		             form = this.up('form').getForm();
		             tmp_win  = this.up('window');
		             if (form.isValid()) {
		                btn.disable();

	                    form.submit({
	                        url: '<%= url_for(:action=>'exe_modify_image') -%>',
	                        waitMsg: 'Salvataggio in corso....',
	                        success: function(fp, o) {
								tmp_win.close();
							    loc_grid = Ext.getCmp(<%= raw @from_component_id.to_json -%>);								  
								loc_grid.store.load();											                            
	                        },
							failure: function(fp, o) {
	                            //msg('Success', 'Processed file "' + o.result.file + '" on the server');
                                Ext.Msg.alert('Import non eseguito. ', o.result.message);	                            
	                        }	                        
	                    });
		                
	                    return false;
		             }
		            }
		          }, 
		          
		          {
		            text: 'Chiudi',												            
		            scale: 'large',
		            handler: function (btn, evt) {
		            	tmp_win  = this.up('window');
		            	tmp_win.close();
		            }
		          }
		          
		         ]
			}] 
	    
	    
	
   	}
   ]
}